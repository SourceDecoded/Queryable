{"version":3,"sources":["../src/JsonQueryConverter.js"],"names":["JsonQueryBuilder","node","type","nodeName","value","where","_convertNode","valueExpression","operationExpression","Array","isArray","children","Error","forEach","childNode","expression","push","json","object","JSON","parse","Object","keys","reduce","query","key"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEqBA,gB;;;;;;;qCACJC,I,EAAM;AAAA;;AACf,gBAAIA,QAAQ,IAAZ,EAAkB;AACd,uBAAOA,IAAP;AACH;;AAED,gBAAIA,KAAKC,IAAL,KAAc,OAAlB,EAA2B;AACvB,oBAAID,KAAKE,QAAL,KAAkB,WAAtB,EAAmC;AAC/BF,yBAAKG,KAAL,CAAWC,KAAX,GAAmB,KAAKC,YAAL,CAAkBL,KAAKG,KAAL,CAAWC,KAA7B,CAAnB;AACA,wBAAIE,mBAAkB,8BAAoBN,KAAKE,QAAzB,EAAmCF,KAAKG,KAAxC,CAAtB;AACH,iBAHD,MAGO;AACH,wBAAIG,oBAAkB,8BAAoBN,KAAKE,QAAzB,EAAmCF,KAAKG,KAAxC,CAAtB;AACH;;AAED,uBAAOG,eAAP;AACH,aATD,MASO,IAAIN,KAAKC,IAAL,KAAc,WAAlB,EAA+B;AAClC,oBAAIM,sBAAsB,kCAAwBP,KAAKE,QAA7B,CAA1B;;AAEA,oBAAI,CAACM,MAAMC,OAAN,CAAcT,KAAKU,QAAnB,CAAL,EAAmC;AAC/B,0BAAM,IAAIC,KAAJ,CAAU,8EAAV,CAAN;AACH;;AAEDX,qBAAKU,QAAL,CAAcE,OAAd,CAAsB,UAACC,SAAD,EAAe;AACjC,wBAAIC,aAAa,MAAKT,YAAL,CAAkBQ,SAAlB,CAAjB;AACAN,wCAAoBG,QAApB,CAA6BK,IAA7B,CAAkCD,UAAlC;AACH,iBAHD;;AAKA,uBAAOP,mBAAP;AACH,aAbM,MAaA,IAAIP,KAAKC,IAAL,IAAa,IAAjB,EAAuB;AAC1B,uBAAOD,IAAP;AACH;AACJ;;;gCAEOgB,I,EAAM;AAAA;;AACV,gBAAIC,SAASC,KAAKC,KAAL,CAAWH,IAAX,CAAb;;AAEA,mBAAOI,OAAOC,IAAP,CAAYJ,MAAZ,EAAoBK,MAApB,CAA2B,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAC9CD,sBAAMC,GAAN,IAAa,OAAKnB,YAAL,CAAkBY,OAAOO,GAAP,CAAlB,CAAb;AACA,uBAAOD,KAAP;AACH,aAHM,EAGJ,EAHI,CAAP;AAKH;;;;;;kBAzCgBxB,gB","file":"JsonQueryConverter.js","sourcesContent":["import OperationExpression from \"./OperationExpression\";\nimport ValueExpression from \"./ValueExpression\";\n\nexport default class JsonQueryBuilder {\n    _convertNode(node) {\n        if (node == null) {\n            return node;\n        }\n\n        if (node.type === \"value\") {\n            if (node.nodeName === \"queryable\") {\n                node.value.where = this._convertNode(node.value.where);\n                let valueExpression = new ValueExpression(node.nodeName, node.value);\n            } else {\n                let valueExpression = new ValueExpression(node.nodeName, node.value);\n            }\n\n            return valueExpression;\n        } else if (node.type === \"operation\") {\n            let operationExpression = new OperationExpression(node.nodeName);\n\n            if (!Array.isArray(node.children)) {\n                throw new Error(\"Invalid Operation Node. It didn't contain a children property of type array.\");\n            }\n\n            node.children.forEach((childNode) => {\n                let expression = this._convertNode(childNode);\n                operationExpression.children.push(expression);\n            });\n\n            return operationExpression;\n        } else if (node.type == null) {\n            return node;\n        }\n    }\n\n    convert(json) {\n        let object = JSON.parse(json);\n\n        return Object.keys(object).reduce((query, key) => {\n            query[key] = this._convertNode(object[key]);\n            return query;\n        }, {});\n\n    }\n}"]}